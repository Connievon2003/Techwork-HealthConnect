<html>

  <head>
    <title>HealthConnect</title>
    <link rel="stylesheet" href="style.css"
    <meta charset = "utf-8">
    <base href = "/">
    <meta name = "viewport" content = "width=device-width", initial-scale = 1>
    <!-- omitted... -->
      <script src="https://apis.google.com/js/api.js" type="text/javascript"></script>

    <link rel="stylesheet" href="style.css"
  </head>
  <script src="https://www.gstatic.com/firebasejs/7.14.5/firebase-app.js"></script>
  <script>

  // Our web app's Firebase configuration
  var firebaseConfig = {
  apiKey: "AIzaSyAf8yvEANFplWCuLNmfx6BCMPI48KEK76s",
  authDomain: "techwork-healthc-1588976071067.firebaseapp.com",
  databaseURL: "https://techwork-healthc-1588976071067.firebaseio.com",
  projectId: "techwork-healthc-1588976071067",
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  //make auth2 and firestore references
  const auth = firebase.auth();
  const db = firebase.firestore();

  //update firestore settings for version 5
  db.settings({timestampsInSnapshots: true})

// listen for auth status changes
auth.onAuthStateChanged(user => {
  if (user) {
    console.log('user logged in: ', user);
  } else {
    console.log('user logged out');
  }
});

//signup
const signupForm = document.querySelector('#signup-form');
signupForm.addEventListener('submit', (e) => {
  e.preventDeFault();

  //get user info
  const email = signupForm['signup-email'].value;
  const password = signupForm['signup-password'].value;

// sign up the user in the firebase databaseURL
  auth.createUserWithEmailAndPassword(email, password).then(cred => {
    console.log(cred.user)
    const modal = document.querySelector('#modal-signup');
    M.Modal.getInstance(modal).close();
    signupForm.reset();
  });
});

// logout
const logout = document.querySelector('#logout');
logout.addEventListener('click', (e) => {
  e.preventDefault();
  auth.signOut()
});

// login
const loginForm = document.querySelector('#login-form');
loginForm.addEventListener('submit', (e) => {
  e.preventDefault();

  // get user info
  const email = loginForm['login-email'].value;
  const password = loginForm['login-password'].value;

  // log the user in
  auth.signInWithEmailAndPassword(email, password).then((cred) => {
    // close the signup modal & reset form
    const modal = document.querySelector('#modal-login');
    M.Modal.getInstance(modal).close();
    loginForm.reset();
  });

});

// setup materialize components
document.addEventListener('DOMContentLoaded', function() {

var modals = document.querySelectorAll('.modal');
M.Modal.init(modals);

});

</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

<body>
  <navbar role="navigation" aria-label="main menu">
       <ul iclass="navbar">
             <a href="./index.html">Home</a>
             <a href="./calendar.html">Calendar</a>
             <a href="./BMICalc.html">BMI Calculator</a>
             <a href="./search.html">Search</a>
             <a href="./help.html">Help</a>
             <a href="./Account.html">Account</a>
      </ul>
  </navbar>

   <a href="#" class="brand-logo">
     <div id="Union_3">
       <h1> HEALTHCONNECT <h/1>
         <img src="logo.svg" style="width: 70px; margin-top: 20px; margin-left: 50px;">
       </div>
   </a>

   <!-- SIGN UP MODAL Modify to ask for user input (age, name, etc)-->
   <div id="modal-signup" class="modal">
     <div class="modal-content">
       <h4>Sign up</h4><br />
       <form id="signup-form">
         <div class="input-field">
           <input type="email" id="signup-email" required />
           <label for="signup-email">Email address</label>
         </div>
         <div class="input-field">
           <input type="password" id="signup-password" required />
           <label for="signup-password">Choose password</label>
         </div>
         <button class="btn yellow darken-2 z-depth-0">Sign up</button>
       </form>
     </div>
   </div>

   <!-- LOGIN MODAL -->
   <div id="modal-login" class="modal">
     <div class="modal-content">
       <h4>Login</h4><br />
       <form id="login-form">
         <div class="input-field">
           <input type="email" id="login-email" required />
           <label for="login-email">Email address</label>
         </div>
         <div class="input-field">
           <input type="password" id="login-password" required />
           <label for="login-password">Your password</label>
         </div>
         <button class="btn yellow darken-2 z-depth-0">Login</button>
       </form>
     </div>
   </div>


   <!-- <script  src="https://www.gstatic.com/firebase/5.6.0/firebase-app.js"></script>
   <script  src="https://www.gstatic.com/firebase/5.6.0/firebase-auth.js"></script>
   <script  src="https://www.gstatic.com/firebase/5.6.0/firebase-firestore.js"></script>
   <script>
     // Our web app's Firebase configuration
     var config = {
       apiKey: "AIzaSyAf8yvEANFplWCuLNmfx6BCMPI48KEK76s",
       authDomain: "techwork-healthc-1588976071067.firebaseapp.com",
       databaseURL: "https://techwork-healthc-1588976071067.firebaseio.com",
       projectId: "techwork-healthc-1588976071067",
     };
     // Initialize Firebase
     firebase.initializeApp(config);
     //make auth2 and firestore references
     const auth = firebase.auth();
     const db = firebase.firestore();

     //update firestore settings for version 5
     db.settings({timestampsInSnapshots: true})
   </script>


   <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
   <script src="scripts/auth.js"></script>
   <script src="scripts/index.js"></script> -->


</body>

</html>
